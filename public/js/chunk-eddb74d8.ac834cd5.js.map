{"version":3,"sources":["webpack:///./src/libs/utils.js","webpack:///./src/views/VideoSessionPlay.vue?f35e","webpack:///./src/views/VideoSessionPlay.vue","webpack:///./src/views/VideoSessionPlay.vue?d751"],"names":["language","require","utils","mobile","trim","indexOf","length","charAt","x","Number","toString","replace","str","unFixNumbers","String","showErrors","vue","err","alertText","data","errors","i","this","translate","$swal","fire","title","text","icon","confirmButtonText","showSuccess","msg","position","showConfirmButton","timer","getCartCount","cart","out","orderDetails","orderDetail","all_videos_buy","productDetails","input","toJalali","inp","jmoment","format","afterSuccessLogin","response","store","commit","access_token","user_id","menus","id","group","type","first_name","last_name","isConnected","message","reconnectError","class","_createElementVNode","_hoisted_5","_hoisted_23","_createElementBlock","$store","state","menuToggle","_createVNode","_component_TheSidemenu","_component_TheTopmenu","_toDisplayString","$route","meta","$data","is_hidden","_hoisted_7","product","name","params","videoSessionName","video_session","is_aparat","innerHTML","video_link","src","frameborder","allow","allowFullScreen","webkitallowfullscreen","mozallowfullscreen","_hoisted_16","files","_Fragment","_renderList","item","key","href","_ctx","file_path","target","_hoisted_20","video_session_type","_hoisted_24","_hoisted_26","index","$options","onClick","role","_hoisted_32","_hoisted_31","$event","placeholder","onKeyup","_hoisted_4","_hoisted_6","created","arefApi","ArefApi","productDetailViedosId","API_STORAGE_URL","process","getVideoSessionInfo","getBlockedUsers","startInterval","components","TheSidemenu","TheTopmenu","videoSessionData","chatMessages","chatMsg","isSocketConnected","socket","videoSessionId","blockedUser","timerHandler","methods","getProductVideoSessionInfo","then","resp","startChat","onMessage","catch","socketData","Type","Token","token","Data","video_session_id","$socket","sendObj","sockets","onmessage","resivedData","JSON","parse","concat","sendChat","blockUserConfirm","userId","showCancelButton","cancelButtonText","confirmButtonColor","cancelButtonColor","value","isConfirmed","blockUser","blocked_users","isUserBlocked","unBlockUser","setInterval","updated","container","document","querySelector","scrollTo","scrollHeight","watch","newVal","unmounted","clearInterval","__exports__","render"],"mappings":"mKAAA,MAAMA,EAAWC,EAAQ,QAIzB,MAAMC,EAAM,gDACKC,IACbA,EAASA,EAAOC,SACZD,EAAOE,QAAQ,MAAQ,KAGN,IAAjBF,EAAOG,QAAoC,GAApBH,EAAOI,OAAO,IAA+B,GAApBJ,EAAOI,OAAO,MAN1D,6BAYAC,GACS,GAAbC,OAAOD,GAAgB,EACtBA,GACLA,EAAIA,EAAEE,WAAWC,QAAQ,KAAM,IACxBH,EAAEE,WAAWC,QAAQ,wBAAyB,MAFtC,IAdP,8BAoECC,IACT,IAAIC,EAAeC,OAAOF,GAsB1B,OArBAC,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAE1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KAC1CE,EAAeA,EAAaF,QAAQ,KAAM,KACnCE,IAxETE,WAAWC,EAAKC,GACd,IAAIC,EAAY,GAChB,GAAID,EAAIE,KAAKC,OACX,IAAK,IAAIC,KAAKJ,EAAIE,KAAKC,OACrBF,IACgB,IAAbA,EAAkB,GAAK,KACrBI,KAAKC,UAAUN,EAAIE,KAAKC,OAAOC,IAAjC,IAGPL,EAAIQ,MAAMC,KAAK,CACbC,MAAO,OACPC,KAAO,GAAET,EACTU,KAAM,QACNC,kBAAmB,cAIvBC,YAAYd,EAAKe,EAAM,MACrBf,EAAIQ,MAAMC,KAAK,CACbC,MAAO,GACPC,KAAMI,GAAa,4BACnBH,KAAM,UAENI,SAAU,SACVC,mBAAmB,EACnBC,MAAO,MAIXC,aAAaC,GACX,IAAIC,EAAM,EACV,MAAMC,EAAeF,EAAKG,YAC1B,IAAK,IAAIlB,KAAKiB,EAC0B,GAAlCA,EAAajB,GAAGmB,eAClBH,IAEAA,GAAOC,EAAajB,GAAGoB,eAAenC,OAG1C,OAAO+B,EAGTd,UAAUmB,GACR,OAAK1C,EAAS0C,GAGP1C,EAAS0C,GAFPA,EA+BXC,SAASC,GACP,OAAOC,IAAQD,GAAKE,OAAO,iBAG7BC,kBAAkBC,GAChBC,OAAMC,OAAO,MAAO,CAAC,QAASF,EAAS7B,KAAKgC,eAC5CF,OAAMC,OAAO,MAAO,CAAC,UAAWF,EAAS7B,KAAKiC,UAC9CH,OAAMC,OAAO,MAAO,CAAC,QAASF,EAAS7B,KAAKkC,QAC5CJ,OAAMC,OAAO,MAAO,CAAC,eAAgBF,EAAS7B,KAAKkC,MAAM,GAAGC,KAC5DL,OAAMC,OAAO,MAAO,CAAC,gBAAiBF,EAAS7B,KAAKoC,MAAMC,OAC1DP,OAAMC,OAAO,MAAO,CAClB,WACC,GAAEF,EAAS7B,KAAKsC,WAAaT,EAAS7B,KAAKsC,WAAa,MACvDT,EAAS7B,KAAKuC,UAAYV,EAAS7B,KAAKuC,UAAY,OAGxDT,OAAMC,OAAO,MAAO,CAClB,SACA,CACES,aAAa,EACbC,QAAS,GACTC,gBAAgB,MAMT3D,U,kCC7Hf,W,kECGSoD,GAAG,wB,GAEDQ,MAAM,8B,GACNA,MAAM,a,YAIPC,eAAgD,KAA7CD,MAAM,oCAAkC,S,GAA3CE,G,aAGKF,MAAM,a,GAINA,MAAM,O,GACJA,MAAM,4B,GACJR,GAAG,c,yBAOJQ,MAAM,mD,aAYLA,MAAM,a,EACTC,eAA+C,OAA1CD,MAAM,oBAAmB,eAAW,G,SAGvCA,MAAM,0C,SAIIA,MAAM,0C,aAeZC,eAA+B,KAA5BD,MAAM,mBAAiB,S,GAO/BA,MAAM,4B,SAEPA,MAAM,Q,EAKNC,eAEM,OAFDD,MAAM,gCAA+B,0BAE1C,G,GAFAG,G,SAKUH,MAAM,e,EAChBC,eAAmC,OAA9BD,MAAM,eAAc,QAAI,G,SACHA,MAAM,yB,SAGpBA,MAAM,wBAAwBR,GAAG,e,GAUjCQ,MAAM,W,GAKTA,MAAM,Y,+BAoBVA,MAAM,uB,GACJA,MAAM,2C,GAQNA,MAAM,mC,qHAhI3BI,eA4IM,OA5IDJ,MAAK,gBAAC,SAAQ,KAAcK,OAAOC,MAAMC,aAAYf,GAAG,WAA7D,CACEgB,eAAeC,GACfR,eAyIM,MAzIN,EAyIM,CAxIJO,eAAcE,GACdT,eAsIM,MAtIN,EAsIM,CArIJA,eAEI,IAFJ,EAEIU,oBADMC,OAAOC,KAAKjD,OAAK,GAEfkD,oBAA8C,GAA1BA,mBAAiBC,WAAjD,iBAGAX,eA8HM,MAAAY,EAAA,CA7HJf,eAGM,MAHN,EAGMU,eAFDG,mBAAiBG,QAAQC,MAAO,UACnCP,oBAAQC,OAAOO,OAAOC,kBAAgB,GAExCnB,eAwHM,MAxHN,EAwHM,CAvHJA,eAiDM,MAjDN,EAiDM,CAhDJA,eAkBM,MAlBN,EAkBM,CAhBIa,mBAAiBO,cAAcC,4BADvClB,eAGO,O,MADLmB,UAAQT,mBAAiBO,cAAcG,YAFzC,6BAIApB,eAYM,MAZN,EAYM,CARJH,eAOU,UANPwB,IAAKX,mBAAiBO,cAAcG,WACrCE,YAAY,IACZC,MAAM,0EACNC,gBAAgB,OAChBC,sBAAsB,OACtBC,mBAAmB,QANrB,eAUJ7B,eA4BM,MA5BN,EA4BM,CA3BJ8B,EAESjB,mBAAiBkB,OAD1B,iBAMA5B,eAmBM,MAnBN,EAmBM,qBAlBJA,eAiBM6B,OAAA,KAAAC,eAhBWpB,mBAAiBkB,MAAzBG,I,iBADT/B,eAiBM,OAfHgC,IAAKD,EAAK3C,GACXQ,MAAM,gEAHR,CAaEC,eAGI,KAHAoC,KAAMC,kBAAkBH,EAAKI,UAAWC,OAAO,UAAnD,CACEC,iBAA+B,IAC/B9B,eAAGwB,EAAKjB,MAAI,IAFd,SAbF,UANwBc,iBAD1B5B,eAKM,MALN,EAGC,8BAyBLH,eAoEM,MApEN,EAoEM,CAjEwE,WAAjDa,mBAAiBO,cAAcqB,oBAAkB,iBAF5EtC,eASM,MATN,EASMuC,KATN,iBAWAvC,eAuDM,MAvDN,EAuDM,CAtDJwC,EACY9B,gBAAZ,iBAGAV,eAkCM,MAlCN,EAkCM,qBAjCJA,eAgCM6B,OAAA,KAAAC,eA/BoBpB,eAAY,CAA5BqB,EAAMU,K,iBADhBzC,eAgCM,OA9BHgC,IAAKS,EACN7C,MAAK,gBAAC,qCACyBmC,EAAK3C,IAAE,KAASa,OAAOC,MAAMhB,QAAO,qBAJrE,CAQEW,eAKM,YAJJA,eAA+C,OAA/C,EAA+CU,eAArBwB,EAAKjB,MAAO,KAAE,GACxCjB,eAEO,YAAAU,eADFwB,EAAKlE,KAAG,KAGfgC,eAiBM,MAjBN,EAiBM,CAfK6C,gBAAcX,EAAK3C,KAD5B,iBAQAY,eAOI,K,MALFJ,MAAM,8BACL+C,QAAK,GAAED,cAAYX,EAAK3C,IACzBwD,KAAK,UACN,cAED,EAAAC,KAdS,iBADT7C,eAOI,K,MALFJ,MAAM,6BACNgD,KAAK,SACJD,QAAK,GAAED,mBAAiBX,EAAK3C,KAC/B,cAED,EAAA0D,OAtBJ,eAJUpC,iBAAZV,eAEM,MAFN,EAAwD,2BAsCxDH,eAcM,MAdN,EAcM,CAbJA,eAOM,MAPN,EAOM,gBANJA,eAKE,S,qCAJSa,UAAOqC,GAChBnD,MAAM,qBACNoD,YAAY,0BACXC,QAAK,mCAAQP,6BAAQ,aAJxB,mBACWhC,eAMbb,eAIM,MAJN,EAIM,CAHJA,eAEI,KAFA8C,QAAK,oBAAED,8BAAU9C,MAAM,yBAAwB,0BAzHL,iBAA1DI,eAEM,MAAAkD,EAAAC,SAVZ,G,oDAoJa,GACbrC,KAAM,wBACNsC,UACEhG,KAAKiG,QAAU,IAAIC,OAAQlG,MAC3BA,KAAKpB,MAAQ,IAAIA,OACjBoB,KAAKmG,sBAAwBnG,KAAKoD,OAAOO,OAAOwC,sBAChDnG,KAAKoG,gBAAkBC,2BACvBrG,KAAKsG,sBACLtG,KAAKuG,kBACLvG,KAAKwG,iBAEPC,WAAY,CACVC,mBACAC,mBAEF9G,OACE,MAAO,CACL+G,iBAAkB,KAClBC,aAAc,GACdC,QAAS,KACTC,oBAAmB/G,KAAK6C,OAAOC,MAAMkE,QACjChH,KAAK6C,OAAOC,MAAMkE,OAAO3E,YAE7B4E,eAAgB,KAChBC,YAAa,GACbC,aAAc,OAGlBC,QAAS,CACPd,sBACEtG,KAAKiG,QACFoB,2BAA2BrH,KAAKmG,uBAChCmB,KAAMC,IACLvH,KAAK4G,iBAAmBW,EAAK1H,KAC7BG,KAAKiH,eAAiBjH,KAAK4G,iBAAiB/C,cAAc7B,GAEE,UAA1DhC,KAAK4G,iBAAiB/C,cAAcqB,qBAEpClF,KAAKwH,YACLxH,KAAKyH,eAGRC,MAAO/H,IACNK,KAAKpB,MAAMa,WAAWO,KAAML,MAGlC6H,YACE,MAAMG,EAAa,CACjBC,KAAM,gBACNC,MAAO7H,KAAK6C,OAAOC,MAAMgF,MACzBC,KAAM,CAAEC,iBAAkB7I,OAAOa,KAAKiH,kBAGxCjH,KAAKiI,QAAQC,QAAQP,IAEvBF,YACEzH,KAAKsF,SAAS6C,QAAQC,UAAavI,IACjC,MAAMwI,EAAcC,KAAKC,MAAM1I,EAAKA,MACZ,WAApBwI,EAAYT,OACd5H,KAAK6G,aAAe7G,KAAK6G,aAAa2B,OAAOH,EAAYN,SAI/DU,WACE,IAAKzI,KAAK8G,QACR,OAEF,MAAMa,EAAa,CACjBC,KAAM,UACNC,MAAO7H,KAAK6C,OAAOC,MAAMgF,MACzBC,KAAM,CACJtH,IAAKT,KAAK8G,QACVkB,iBAAkB7I,OAAOa,KAAKiH,kBAGlCjH,KAAKiI,QAAQC,QAAQP,GACrB3H,KAAK8G,QAAU,MAEjB4B,iBAAiBC,GACf3I,KAAKE,MACFC,KAAK,CACJC,MAAO,QACPC,KAAM,4BACNC,KAAM,UACNsI,kBAAkB,EAClBC,iBAAkB,MAClBC,mBAAoB,UACpBC,kBAAmB,OACnBxI,kBAAmB,mBAEpB+G,KAAM0B,IACDA,EAAMC,aACRjJ,KAAKkJ,UAAUP,MAIvBO,UAAUP,GACR3I,KAAKiG,QACFiD,UAAUP,GACVrB,KAAMC,IACLvH,KAAKpB,MAAM4B,YAAYR,MACvBA,KAAKkH,YAAcK,EAAK4B,gBAEzBzB,MAAO/H,IACNK,KAAKpB,MAAMa,WAAWO,KAAML,MAGlCyJ,cAAcT,GACZ,OAAO3I,KAAKkH,YAAYnI,QAAQ4J,IAAW,GAE7CpC,kBACEvG,KAAKiG,QACFM,kBACAe,KAAMC,IACLvH,KAAKkH,YAAcK,EAAK4B,gBAEzBzB,MAAO/H,IACNK,KAAKpB,MAAMa,WAAWO,KAAML,MAGlC0J,YAAYV,GACV3I,KAAKiG,QACFoD,YAAYV,GACZrB,KAAMC,IACLvH,KAAKpB,MAAM4B,YAAYR,MACvBA,KAAKkH,YAAcK,EAAK4B,gBAEzBzB,MAAO/H,IACNK,KAAKpB,MAAMa,WAAWO,KAAML,MAGlC6G,gBACExG,KAAKmH,aAAemC,YAAY,KAC9BtJ,KAAKuG,mBACJ,OAGPgD,UACE,IAAIC,EAAYC,SAASC,cAAc,gBACnCF,GACFA,EAAUG,SAAS,EAAGH,EAAUI,eAGpCC,MAAO,CACL,kCAAmC,SAAUC,GACvCA,IACF9J,KAAK6G,aAAe,GACpB7G,KAAKwH,eAIXuC,YACM/J,KAAKmH,cACP6C,cAAchK,KAAKmH,gB,iCCvSzB,MAAM8C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB","file":"js/chunk-eddb74d8.ac834cd5.js","sourcesContent":["const language = require(\"../languages/fa.json\");\nimport jmoment from \"moment-jalaali\";\nimport store from \"../store\";\n\nclass utils {\n  validMobile = (mobile) => {\n    mobile = mobile.trim();\n    if (mobile.indexOf(\" \") > -1) {\n      return false;\n    }\n    if (mobile.length == 11 && mobile.charAt(0) == 0 && mobile.charAt(1) == 9) {\n      return true;\n    }\n    return false;\n  };\n\n  monize = (x) => {\n    if (Number(x) == 0) return 0;\n    if (!x) return \"\";\n    x = x.toString().replace(/,/g, \"\");\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  };\n\n  showErrors(vue, err) {\n    let alertText = \"\";\n    if (err.data.errors) {\n      for (let i in err.data.errors) {\n        alertText +=\n          (alertText == \"\" ? \"\" : \",\") +\n          `${this.translate(err.data.errors[i])} `;\n      }\n    }\n    vue.$swal.fire({\n      title: \"!خطا\",\n      text: `${alertText}`,\n      icon: \"error\",\n      confirmButtonText: \"متوجه شدم\",\n    });\n  }\n\n  showSuccess(vue, msg = null) {\n    vue.$swal.fire({\n      title: \"\",\n      text: msg ? msg : `عملیات با موفقیت انجام شد`,\n      icon: \"success\",\n      // confirmButtonText: \"متوجه شدم\",\n      position: 'center',\n      showConfirmButton: false,\n      timer: 2000\n    });\n  }\n\n  getCartCount(cart) {\n    let out = 0;\n    const orderDetails = cart.orderDetail;\n    for (let i in orderDetails) {\n      if (orderDetails[i].all_videos_buy == 1) {\n        out++;\n      } else {\n        out += orderDetails[i].productDetails.length;\n      }\n    }\n    return out;\n  }\n\n  translate(input) {\n    if (!language[input]) {\n      return input;\n    }\n    return language[input];\n  }\n\n  perToEn = (str) => {\n    var unFixNumbers = String(str);\n    unFixNumbers = unFixNumbers.replace(/۰/g, \"0\");\n    unFixNumbers = unFixNumbers.replace(/۱/g, \"1\");\n    unFixNumbers = unFixNumbers.replace(/۲/g, \"2\");\n    unFixNumbers = unFixNumbers.replace(/۳/g, \"3\");\n    unFixNumbers = unFixNumbers.replace(/۴/g, \"4\");\n    unFixNumbers = unFixNumbers.replace(/۵/g, \"5\");\n    unFixNumbers = unFixNumbers.replace(/۶/g, \"6\");\n    unFixNumbers = unFixNumbers.replace(/۷/g, \"7\");\n    unFixNumbers = unFixNumbers.replace(/۸/g, \"8\");\n    unFixNumbers = unFixNumbers.replace(/۹/g, \"9\");\n    //-------------apple\n    unFixNumbers = unFixNumbers.replace(/٠/g, \"0\");\n    unFixNumbers = unFixNumbers.replace(/١/g, \"1\");\n    unFixNumbers = unFixNumbers.replace(/٢/g, \"2\");\n    unFixNumbers = unFixNumbers.replace(/٣/g, \"3\");\n    unFixNumbers = unFixNumbers.replace(/٤/g, \"4\");\n    unFixNumbers = unFixNumbers.replace(/٥/g, \"5\");\n    unFixNumbers = unFixNumbers.replace(/٦/g, \"6\");\n    unFixNumbers = unFixNumbers.replace(/٧/g, \"7\");\n    unFixNumbers = unFixNumbers.replace(/٨/g, \"8\");\n    unFixNumbers = unFixNumbers.replace(/٩/g, \"9\");\n    return unFixNumbers;\n  };\n\n  toJalali(inp) {\n    return jmoment(inp).format(\"jYYYY/jMM/jDD\");\n  }\n\n  afterSuccessLogin(response) {\n    store.commit(\"set\", [\"token\", response.data.access_token]);\n    store.commit(\"set\", [\"user_id\", response.data.user_id]);\n    store.commit(\"set\", [\"menus\", response.data.menus]);\n    store.commit(\"set\", [\"menuActiveId\", response.data.menus[1].id]);\n    store.commit(\"set\", [\"userGroupType\", response.data.group.type]);\n    store.commit(\"set\", [\n      \"fullName\",\n      `${response.data.first_name ? response.data.first_name : \"\"} ${\n        response.data.last_name ? response.data.last_name : \"\"\n      }`,\n    ]);\n    store.commit(\"set\", [\n      \"socket\",\n      {\n        isConnected: false,\n        message: \"\",\n        reconnectError: false,\n      },\n    ]);\n  }\n}\n\nexport default utils;\n// export default {\n//   install: (app) => {\n//     app.config.globalProperties.$utils = new utils;\n//   }\n// };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VideoSessionPlay.vue?vue&type=style&index=0&id=342b4a80&lang=css\"","<template>\n  <div class=\"d-flex\" :class=\"this.$store.state.menuToggle\" id=\"wrapper\">\n    <TheSidemenu />\n    <div id=\"page-content-wrapper\">\n      <TheTopmenu />\n      <div class=\"container-fluid text-start\">\n        <p class=\"fs-5 my-2\">\n          {{ this.$route.meta.title }}\n        </p>\n        <div v-if=\"!videoSessionData || videoSessionData.is_hidden != 0\">\n          <i class=\"fas fa-spinner fa-spin fs-1 mt-3\"></i>\n        </div>\n        <div v-else>\n          <div class=\"fs-6 mb-2\">\n            {{ videoSessionData.product.name }} جلسه:\n            {{ this.$route.params.videoSessionName }}\n          </div>\n          <div class=\"row\">\n            <div class=\"col-12 col-sm-8 col-md-8\">\n              <div id=\"videoFrame\">\n                <div\n                  v-if=\"videoSessionData.video_session.is_aparat\"\n                  v-html=\"videoSessionData.video_session.video_link\"\n                ></div>\n                <div\n                  v-else\n                  class=\"r1_iframe_embed border border-secondary rounded\"\n                >\n                  <iframe\n                    :src=\"videoSessionData.video_session.video_link\"\n                    frameborder=\"0\"\n                    allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen=\"true\"\n                    webkitallowfullscreen=\"true\"\n                    mozallowfullscreen=\"true\"\n                  ></iframe>\n                </div>\n              </div>\n              <div class=\"card my-2\">\n                <div class=\"card-header fs-6\">دریافت جزوه</div>\n                <div\n                  v-if=\"!videoSessionData.files\"\n                  class=\"card-body d-flex justify-content-start\"\n                >\n                  این جلسه جزوه ندارد\n                </div>\n                <div v-else class=\"card-body d-flex justify-content-start\">\n                  <div\n                    v-for=\"item in videoSessionData.files\"\n                    :key=\"item.id\"\n                    class=\"\n                      border\n                      d-flex\n                      justify-content-between\n                      m-1\n                      p-2\n                      rounded-1\n                      fs-6\n                    \"\n                  >\n                    <a :href=\"API_STORAGE_URL + item.file_path\" target=\"_blank\">\n                      <i class=\"fas fa-download\"></i>\n                      {{ item.name }}\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-12 col-sm-4 col-md-4\">\n              <div\n                class=\"card\"\n                v-if=\"\n                  videoSessionData.video_session.video_session_type == 'offline'\n                \"\n              >\n                <div class=\"card-header fs-5 text-center\">\n                  کلیه جلسات این محصول\n                </div>\n              </div>\n\n              <div v-else class=\"card border\">\n                <div class=\"card-header\">چتها</div>\n                <div v-if=\"!chatMessages\" class=\"card-body hs-chat-box\">\n                  پیامی ارسال نشده است\n                </div>\n                <div v-else class=\"card-body hs-chat-box\" id=\"hs-chat-box\">\n                  <div\n                    v-for=\"(item, index) in chatMessages\"\n                    :key=\"index\"\n                    class=\"text-start p-2 rounded border mb-1\"\n                    :class=\"\n                      item.id == this.$store.state.user_id ? 'text-primary' : ''\n                    \"\n                  >\n                    <div>\n                      <span class=\"fw-bold\"> {{ item.name }}: </span>\n                      <span>\n                        {{ item.msg }}\n                      </span>\n                    </div>\n                    <div class=\"text-end\">\n                      <a\n                        v-if=\"!isUserBlocked(item.id)\"\n                        class=\"badge bg-light text-danger\"\n                        role=\"button\"\n                        @click=\"blockUserConfirm(item.id)\"\n                      >\n                        مسدود شود\n                      </a>\n                      <a\n                        v-else\n                        class=\"badge bg-light text-success\"\n                        @click=\"unBlockUser(item.id)\"\n                        role=\"button\"\n                      >\n                        آزاد سازی\n                      </a>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"card-footer row g-0\">\n                  <div class=\"col-9 col-sm-8 m-0 ps-sm-1 py-1 py-md-0\">\n                    <input\n                      v-model=\"chatMsg\"\n                      class=\"form-control w-100\"\n                      placeholder=\"پیام خود را بنویسید ...\"\n                      @keyup.enter=\"sendChat\"\n                    />\n                  </div>\n                  <div class=\"col-3 col-sm-4 m-0 my-1 my-sm-0\">\n                    <a @click=\"sendChat\" class=\"btn btn-success w-100\">\n                      ارسال\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport TheSidemenu from \"../components/TheSidemenu\";\nimport TheTopmenu from \"../components/TheTopmenu\";\nimport ArefApi from \"../libs/api.js\";\nimport utils from \"../libs/utils\";\n\nexport default {\n  name: \"AdminVideoSessionPlay\",\n  created() {\n    this.arefApi = new ArefApi(this);\n    this.utils = new utils();\n    this.productDetailViedosId = this.$route.params.productDetailViedosId;\n    this.API_STORAGE_URL = process.env.VUE_APP_API_STORAGE_URL;\n    this.getVideoSessionInfo();\n    this.getBlockedUsers();\n    this.startInterval();\n  },\n  components: {\n    TheSidemenu,\n    TheTopmenu,\n  },\n  data() {\n    return {\n      videoSessionData: null,\n      chatMessages: [],\n      chatMsg: null,\n      isSocketConnected: this.$store.state.socket\n        ? this.$store.state.socket.isConnected\n        : false,\n      videoSessionId: null,\n      blockedUser: [],\n      timerHandler: null,\n    };\n  },\n  methods: {\n    getVideoSessionInfo() {\n      this.arefApi\n        .getProductVideoSessionInfo(this.productDetailViedosId)\n        .then((resp) => {\n          this.videoSessionData = resp.data;\n          this.videoSessionId = this.videoSessionData.video_session.id;\n          if (\n            this.videoSessionData.video_session.video_session_type == \"online\"\n          ) {\n            this.startChat();\n            this.onMessage();\n          }\n        })\n        .catch((err) => {\n          this.utils.showErrors(this, err);\n        });\n    },\n    startChat() {\n      const socketData = {\n        Type: \"START_MESSAGE\",\n        Token: this.$store.state.token,\n        Data: { video_session_id: Number(this.videoSessionId) },\n      };\n\n      this.$socket.sendObj(socketData);\n    },\n    onMessage() {\n      this.$options.sockets.onmessage = (data) => {\n        const resivedData = JSON.parse(data.data);\n        if (resivedData.Type == \"MESSAGE\") {\n          this.chatMessages = this.chatMessages.concat(resivedData.Data);\n        }\n      };\n    },\n    sendChat() {\n      if (!this.chatMsg) {\n        return;\n      }\n      const socketData = {\n        Type: \"MESSAGE\",\n        Token: this.$store.state.token,\n        Data: {\n          msg: this.chatMsg,\n          video_session_id: Number(this.videoSessionId),\n        },\n      };\n      this.$socket.sendObj(socketData);\n      this.chatMsg = null;\n    },\n    blockUserConfirm(userId) {\n      this.$swal\n        .fire({\n          title: \"اخطار\",\n          text: \"آیا مسدود سازی انجام شود؟\",\n          icon: \"warning\",\n          showCancelButton: true,\n          cancelButtonText: \"خیر\",\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"بله انجام شود!\",\n        })\n        .then((value) => {\n          if (value.isConfirmed) {\n            this.blockUser(userId);\n          }\n        });\n    },\n    blockUser(userId) {\n      this.arefApi\n        .blockUser(userId)\n        .then((resp) => {\n          this.utils.showSuccess(this);\n          this.blockedUser = resp.blocked_users;\n        })\n        .catch((err) => {\n          this.utils.showErrors(this, err);\n        });\n    },\n    isUserBlocked(userId) {\n      return this.blockedUser.indexOf(userId) > -1;\n    },\n    getBlockedUsers() {\n      this.arefApi\n        .getBlockedUsers()\n        .then((resp) => {\n          this.blockedUser = resp.blocked_users;\n        })\n        .catch((err) => {\n          this.utils.showErrors(this, err);\n        });\n    },\n    unBlockUser(userId) {\n      this.arefApi\n        .unBlockUser(userId)\n        .then((resp) => {\n          this.utils.showSuccess(this);\n          this.blockedUser = resp.blocked_users;\n        })\n        .catch((err) => {\n          this.utils.showErrors(this, err);\n        });\n    },\n    startInterval() {\n      this.timerHandler = setInterval(() => {\n        this.getBlockedUsers();\n      }, 15 * 60 * 1000);\n    },\n  },\n  updated() {\n    let container = document.querySelector(\"#hs-chat-box\");\n    if (container) {\n      container.scrollTo(0, container.scrollHeight);\n    }\n  },\n  watch: {\n    \"$store.state.socket.isConnected\": function (newVal) {\n      if (newVal) {\n        this.chatMessages = [];\n        this.startChat();\n      }\n    },\n  },\n  unmounted() {\n    if (this.timerHandler) {\n      clearInterval(this.timerHandler);\n    }\n  },\n};\n</script>\n<style>\n.r1_iframe_embed {\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n  height: auto;\n  padding-top: 56.25%;\n}\n.r1_iframe_embed iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: 0;\n}\n</style>","import { render } from \"./VideoSessionPlay.vue?vue&type=template&id=342b4a80\"\nimport script from \"./VideoSessionPlay.vue?vue&type=script&lang=js\"\nexport * from \"./VideoSessionPlay.vue?vue&type=script&lang=js\"\n\nimport \"./VideoSessionPlay.vue?vue&type=style&index=0&id=342b4a80&lang=css\"\n\nimport exportComponent from \"/home/hamed/software/setavin-site/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}