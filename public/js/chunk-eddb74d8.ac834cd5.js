(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eddb74d8"],{"90fe":function(e,t,s){"use strict";var i=s("ade3"),a=s("a67b"),o=s.n(a),c=s("c0d6");const r=s("fc29");class n{constructor(){Object(i["a"])(this,"validMobile",e=>(e=e.trim(),!(e.indexOf(" ")>-1)&&(11==e.length&&0==e.charAt(0)&&9==e.charAt(1)))),Object(i["a"])(this,"monize",e=>0==Number(e)?0:e?(e=e.toString().replace(/,/g,""),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):""),Object(i["a"])(this,"perToEn",e=>{var t=String(e);return t=t.replace(/۰/g,"0"),t=t.replace(/۱/g,"1"),t=t.replace(/۲/g,"2"),t=t.replace(/۳/g,"3"),t=t.replace(/۴/g,"4"),t=t.replace(/۵/g,"5"),t=t.replace(/۶/g,"6"),t=t.replace(/۷/g,"7"),t=t.replace(/۸/g,"8"),t=t.replace(/۹/g,"9"),t=t.replace(/٠/g,"0"),t=t.replace(/١/g,"1"),t=t.replace(/٢/g,"2"),t=t.replace(/٣/g,"3"),t=t.replace(/٤/g,"4"),t=t.replace(/٥/g,"5"),t=t.replace(/٦/g,"6"),t=t.replace(/٧/g,"7"),t=t.replace(/٨/g,"8"),t=t.replace(/٩/g,"9"),t})}showErrors(e,t){let s="";if(t.data.errors)for(let i in t.data.errors)s+=(""==s?"":",")+this.translate(t.data.errors[i])+" ";e.$swal.fire({title:"!خطا",text:""+s,icon:"error",confirmButtonText:"متوجه شدم"})}showSuccess(e,t=null){e.$swal.fire({title:"",text:t||"عملیات با موفقیت انجام شد",icon:"success",position:"center",showConfirmButton:!1,timer:2e3})}getCartCount(e){let t=0;const s=e.orderDetail;for(let i in s)1==s[i].all_videos_buy?t++:t+=s[i].productDetails.length;return t}translate(e){return r[e]?r[e]:e}toJalali(e){return o()(e).format("jYYYY/jMM/jDD")}afterSuccessLogin(e){c["a"].commit("set",["token",e.data.access_token]),c["a"].commit("set",["user_id",e.data.user_id]),c["a"].commit("set",["menus",e.data.menus]),c["a"].commit("set",["menuActiveId",e.data.menus[1].id]),c["a"].commit("set",["userGroupType",e.data.group.type]),c["a"].commit("set",["fullName",`${e.data.first_name?e.data.first_name:""} ${e.data.last_name?e.data.last_name:""}`]),c["a"].commit("set",["socket",{isConnected:!1,message:"",reconnectError:!1}])}}t["a"]=n},b592:function(e,t,s){"use strict";s("e5f2")},e309:function(e,t,s){"use strict";s.r(t);var i=s("7a23");const a={id:"page-content-wrapper"},o={class:"container-fluid text-start"},c={class:"fs-5 my-2"},r={key:0},n=Object(i["i"])("i",{class:"fas fa-spinner fa-spin fs-1 mt-3"},null,-1),d=[n],l={key:1},h={class:"fs-6 mb-2"},u={class:"row"},b={class:"col-12 col-sm-8 col-md-8"},m={id:"videoFrame"},p=["innerHTML"],f={key:1,class:"r1_iframe_embed border border-secondary rounded"},O=["src"],j={class:"card my-2"},v=Object(i["i"])("div",{class:"card-header fs-6"},"دریافت جزوه",-1),y={key:0,class:"card-body d-flex justify-content-start"},g={key:1,class:"card-body d-flex justify-content-start"},k=["href"],S=Object(i["i"])("i",{class:"fas fa-download"},null,-1),_={class:"col-12 col-sm-4 col-md-4"},w={key:0,class:"card"},T=Object(i["i"])("div",{class:"card-header fs-5 text-center"}," کلیه جلسات این محصول ",-1),x=[T],C={key:1,class:"card border"},D=Object(i["i"])("div",{class:"card-header"},"چتها",-1),U={key:0,class:"card-body hs-chat-box"},M={key:1,class:"card-body hs-chat-box",id:"hs-chat-box"},I={class:"fw-bold"},$={class:"text-end"},A=["onClick"],B=["onClick"],E={class:"card-footer row g-0"},J={class:"col-9 col-sm-8 m-0 ps-sm-1 py-1 py-md-0"},V={class:"col-3 col-sm-4 m-0 my-1 my-sm-0"};function G(e,t,s,n,T,G){const H=Object(i["G"])("TheSidemenu"),N=Object(i["G"])("TheTopmenu");return Object(i["y"])(),Object(i["h"])("div",{class:Object(i["s"])(["d-flex",this.$store.state.menuToggle]),id:"wrapper"},[Object(i["l"])(H),Object(i["i"])("div",a,[Object(i["l"])(N),Object(i["i"])("div",o,[Object(i["i"])("p",c,Object(i["J"])(this.$route.meta.title),1),T.videoSessionData&&0==T.videoSessionData.is_hidden?(Object(i["y"])(),Object(i["h"])("div",l,[Object(i["i"])("div",h,Object(i["J"])(T.videoSessionData.product.name)+" جلسه: "+Object(i["J"])(this.$route.params.videoSessionName),1),Object(i["i"])("div",u,[Object(i["i"])("div",b,[Object(i["i"])("div",m,[T.videoSessionData.video_session.is_aparat?(Object(i["y"])(),Object(i["h"])("div",{key:0,innerHTML:T.videoSessionData.video_session.video_link},null,8,p)):(Object(i["y"])(),Object(i["h"])("div",f,[Object(i["i"])("iframe",{src:T.videoSessionData.video_session.video_link,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:"true",webkitallowfullscreen:"true",mozallowfullscreen:"true"},null,8,O)]))]),Object(i["i"])("div",j,[v,T.videoSessionData.files?(Object(i["y"])(),Object(i["h"])("div",g,[(Object(i["y"])(!0),Object(i["h"])(i["a"],null,Object(i["E"])(T.videoSessionData.files,t=>(Object(i["y"])(),Object(i["h"])("div",{key:t.id,class:"border d-flex justify-content-between m-1 p-2 rounded-1 fs-6"},[Object(i["i"])("a",{href:e.API_STORAGE_URL+t.file_path,target:"_blank"},[S,Object(i["k"])(" "+Object(i["J"])(t.name),1)],8,k)]))),128))])):(Object(i["y"])(),Object(i["h"])("div",y," این جلسه جزوه ندارد "))])]),Object(i["i"])("div",_,["offline"==T.videoSessionData.video_session.video_session_type?(Object(i["y"])(),Object(i["h"])("div",w,x)):(Object(i["y"])(),Object(i["h"])("div",C,[D,T.chatMessages?(Object(i["y"])(),Object(i["h"])("div",M,[(Object(i["y"])(!0),Object(i["h"])(i["a"],null,Object(i["E"])(T.chatMessages,(e,t)=>(Object(i["y"])(),Object(i["h"])("div",{key:t,class:Object(i["s"])(["text-start p-2 rounded border mb-1",e.id==this.$store.state.user_id?"text-primary":""])},[Object(i["i"])("div",null,[Object(i["i"])("span",I,Object(i["J"])(e.name)+": ",1),Object(i["i"])("span",null,Object(i["J"])(e.msg),1)]),Object(i["i"])("div",$,[G.isUserBlocked(e.id)?(Object(i["y"])(),Object(i["h"])("a",{key:1,class:"badge bg-light text-success",onClick:t=>G.unBlockUser(e.id),role:"button"}," آزاد سازی ",8,B)):(Object(i["y"])(),Object(i["h"])("a",{key:0,class:"badge bg-light text-danger",role:"button",onClick:t=>G.blockUserConfirm(e.id)}," مسدود شود ",8,A))])],2))),128))])):(Object(i["y"])(),Object(i["h"])("div",U," پیامی ارسال نشده است ")),Object(i["i"])("div",E,[Object(i["i"])("div",J,[Object(i["S"])(Object(i["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>T.chatMsg=e),class:"form-control w-100",placeholder:"پیام خود را بنویسید ...",onKeyup:t[1]||(t[1]=Object(i["T"])((...e)=>G.sendChat&&G.sendChat(...e),["enter"]))},null,544),[[i["O"],T.chatMsg]])]),Object(i["i"])("div",V,[Object(i["i"])("a",{onClick:t[2]||(t[2]=(...e)=>G.sendChat&&G.sendChat(...e)),class:"btn btn-success w-100"}," ارسال ")])])]))])])])):(Object(i["y"])(),Object(i["h"])("div",r,d))])])],2)}var H=s("6bf9"),N=s("75d2"),R=s("09bb"),P=s("90fe"),Y={name:"AdminVideoSessionPlay",created(){this.arefApi=new R["a"](this),this.utils=new P["a"],this.productDetailViedosId=this.$route.params.productDetailViedosId,this.API_STORAGE_URL="https://edu.setavin.com/",this.getVideoSessionInfo(),this.getBlockedUsers(),this.startInterval()},components:{TheSidemenu:H["a"],TheTopmenu:N["a"]},data(){return{videoSessionData:null,chatMessages:[],chatMsg:null,isSocketConnected:!!this.$store.state.socket&&this.$store.state.socket.isConnected,videoSessionId:null,blockedUser:[],timerHandler:null}},methods:{getVideoSessionInfo(){this.arefApi.getProductVideoSessionInfo(this.productDetailViedosId).then(e=>{this.videoSessionData=e.data,this.videoSessionId=this.videoSessionData.video_session.id,"online"==this.videoSessionData.video_session.video_session_type&&(this.startChat(),this.onMessage())}).catch(e=>{this.utils.showErrors(this,e)})},startChat(){const e={Type:"START_MESSAGE",Token:this.$store.state.token,Data:{video_session_id:Number(this.videoSessionId)}};this.$socket.sendObj(e)},onMessage(){this.$options.sockets.onmessage=e=>{const t=JSON.parse(e.data);"MESSAGE"==t.Type&&(this.chatMessages=this.chatMessages.concat(t.Data))}},sendChat(){if(!this.chatMsg)return;const e={Type:"MESSAGE",Token:this.$store.state.token,Data:{msg:this.chatMsg,video_session_id:Number(this.videoSessionId)}};this.$socket.sendObj(e),this.chatMsg=null},blockUserConfirm(e){this.$swal.fire({title:"اخطار",text:"آیا مسدود سازی انجام شود؟",icon:"warning",showCancelButton:!0,cancelButtonText:"خیر",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"بله انجام شود!"}).then(t=>{t.isConfirmed&&this.blockUser(e)})},blockUser(e){this.arefApi.blockUser(e).then(e=>{this.utils.showSuccess(this),this.blockedUser=e.blocked_users}).catch(e=>{this.utils.showErrors(this,e)})},isUserBlocked(e){return this.blockedUser.indexOf(e)>-1},getBlockedUsers(){this.arefApi.getBlockedUsers().then(e=>{this.blockedUser=e.blocked_users}).catch(e=>{this.utils.showErrors(this,e)})},unBlockUser(e){this.arefApi.unBlockUser(e).then(e=>{this.utils.showSuccess(this),this.blockedUser=e.blocked_users}).catch(e=>{this.utils.showErrors(this,e)})},startInterval(){this.timerHandler=setInterval(()=>{this.getBlockedUsers()},9e5)}},updated(){let e=document.querySelector("#hs-chat-box");e&&e.scrollTo(0,e.scrollHeight)},watch:{"$store.state.socket.isConnected":function(e){e&&(this.chatMessages=[],this.startChat())}},unmounted(){this.timerHandler&&clearInterval(this.timerHandler)}},L=(s("b592"),s("6b0d")),q=s.n(L);const z=q()(Y,[["render",G]]);t["default"]=z},e5f2:function(e,t,s){},fc29:function(e){e.exports=JSON.parse('{"0":"تراکنش با موفقیت انجام شد","11":"شماره کارت نامعتبر است","12":"موجودی کافی نیست","13":"رمز نادرست است","14":"تعداد دفعات وارد کردن رمز بیش از حد مجاز است","15":"کارت نامعتبر است","16":"دفعات برداشت وجه بیش از حد مجاز است","17":"کاربر از انجام تراکنش منصرف شده است","18":"تاریخ انقضای کارت گذشته است","19":"مبلغ برداشت وجه بیش از حد مجاز است","21":"پذیرنده نامعتبر است","23":"خطای امنیتی رخ داده است","24":"اطلاعات کاربری پذیرنده نامعتبر است","25":"مبلغ نامعتبر است","31":"پاسخ نامعتبر است","32":"فرمت اطلاعات وارد شده صحیح نمی باشد","33":"حساب نامعتبر است","34":"خطای سیستمی","35":"تاریخ نامعتبر است","41":"شماره درخواست تکراری است","42":"یافت نشد Sale تراکنش","43":"قبلا درخواستVerifyداده شده است","44":"درخواستVerfiy یافت نشد","45":"تراکنشSettle شده است","46":"تراکنشSettle نشده است","47":"تراکنشSettle یافت نشد","48":"تراکنشReverse شده است","49":"تراکنشRefund یافت نشد","51":"تراکنش تکراری است","54":"تراکنش مرجع موجود نیست","55":"تراکنش نامعتبر است","61":"خطا در واریز","111":"صادر کننده کارت نامعتبر است","112":"خطای سوییچ صادر کننده کارت","113":"پاسخی از صادر کننده کارت دریافت نشد","114":"دارنده کارت مجاز به انجام این تراکنش نیست","412":"شناسه قبض نادرست است","413":"شناسه پرداخت نادرست است","414":"سازمان صادر کننده قبض نامعتبر است","415":"زمان جلسه کاری به پایان رسیده است","416":"خطا در ثبت اطلاعات","417":"شناسه پرداخت کننده نامعتبر است","418":"اشکال در تعریف اطلاعات مشتری","419":"تعداد دفعات ورود اطلاعات از حد مجاز گذشته است","421":"IPنامعتبر است","Unauthenticated.":"عدم احراز هویت","The selected coupons name is invalid.":"کد تخفیف وارد شده صحیح نیست","The discount code has already been applied.":"این کد تخفیف در حال حاضر به سبد خرید اعمال شده است","You can change start_date just 5 days after or 5 days before!":"تاریخ شروع کلاس را حداکثر ۵ روز میتوانید تغییر دهید","The video link format is invalid.":"فرمت لینک ویدیو صحیح نیست","Order does not exist!":"چنین سفارشی در سامانه وجود ندارد ","The email has already been taken.":"چنین نام کاربری قبلا در سامانه ثبت نام شده است","This order does not belong to you!":"شما اجازه دسترسی به این فاکتور را ندارید","It is repeated!":"رکورد تکراری است","You don\'t have any orders for the product that you have coupon for...":"کد تخفیف وارد شده مربوط به این محصول نمی باشد","already added!":"این مورد در حال حاضر در فاکتور موجود است","The description field is required.":"توضیحات را وارد نمایید","The user type is invalid!":"گروه کاربری کاربر انتخاب شده صحیح نمی باشد","The orders id must be an integer.":"شماره فاکتور صحیح نیست","The name must be at least 3 characters.":"بیشتر از سه کاراکتر در باکس جستجو وارد نمایید","The products id field is required.":"محصول انتخاب نشده است","The otp must be 4 digits.":"کد وارد شده باید 4 رقم باشد","otp does not exist":"کد پیامک شده نا معتبر است","two minutes time out":"زمان کد ارسالی منقضی شده است","The email field is required.":"تلفن همراه را وارد کنید","you may wait more than one minutes":"لطفا 60 ثانیه دیگر تلاش نمایید","OTP is incorrect!":"کد وارد شده صحیح نیست","chairs number already registerd":"شماره صندلی وارد شده قبلا ثبت شده است","you can not delete this product the user buy it before":"این محصول قبلا خریداری شده است و قابل حذف نمی باشد","this product buyed before!":"این محصول قبلا خریداری شده است"}')}}]);
//# sourceMappingURL=chunk-eddb74d8.ac834cd5.js.map