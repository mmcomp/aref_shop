{"version":3,"sources":["webpack:///./src/views/AddCategorytwo.vue","webpack:///./src/views/AddCategorytwo.vue?dc77"],"names":["id","class","for","$store","state","menuToggle","$route","meta","title","error","name","formData","category_ones_id","categoryOnes","item","key","value","selected","category_one","type","placeholder","addEditCategorytwo","showSpin","created","this","arefApi","components","TheSidemenu","TheTopmenu","data","params","categorytwoId","methods","validateFrm","fn","then","$swal","fire","text","icon","confirmButtonText","$router","push","catch","err","alertText","errors","i","finally","loadCategorytwoInfo","Promise","resolve","reject","getCategorytwo","resp","getAllCategoryOnes","getCategoryonesIndex","mounted","render"],"mappings":"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","file":"js/chunk-2d0ba137.dd453228.js","sourcesContent":["<template>\n  <div class=\"d-flex\" :class=\"this.$store.state.menuToggle\" id=\"wrapper\">\n    <TheSidemenu />\n    <div id=\"page-content-wrapper\">\n      <TheTopmenu />\n      <div class=\"container-fluid text-start\">\n        <p class=\"fs-6 m-2\">\n          {{ this.$route.meta.title }}\n        </p>\n        <div v-if=\"error\" class=\"alert alert-danger\">\n          {{ error }}\n        </div>\n        <form class=\"row\">\n          <div class=\"col-md-6 col-xs-12\">\n            <div class=\"form-floating mb-3\">\n              <select\n                class=\"form-control\"\n                id=\"category_ones_id\"\n                name=\"category_ones_id\"\n                v-model=\"formData.category_ones_id\"\n              >\n                <option\n                  v-for=\"item in categoryOnes\"\n                  :key=\"item.id\"\n                  :value=\"item.id\"\n                  :selected=\"item.id == formData.category_one.id\"\n                >\n                  {{ item.name }}\n                </option>\n              </select>\n              <label for=\"provinces\">دسته والد-سطح یک</label>\n            </div>\n          </div>\n\n          <div class=\"col-md-6 col-xs-12\">\n            <div class=\"form-floating mb-3\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"name\"\n                name=\"name\"\n                placeholder=\"نام دسته\"\n                v-model=\"formData.name\"\n              />\n              <label for=\"name\">نام *</label>\n            </div>\n          </div>\n        </form>\n        <div>\n          <a\n            class=\"btn btn-primary btn-block\"\n            @click=\"addEditCategorytwo()\"\n          >\n            ثبت\n          </a>\n          <span v-show=\"showSpin\" >\n            <i class=\"fas fa-spinner fa-spin mt-3\"></i>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TheSidemenu from \"../components/TheSidemenu\";\nimport TheTopmenu from \"../components/TheTopmenu\";\nimport ArefApi from \"../libs/api.js\";\n\nexport default {\n  name: \"AddCategorytwo\",\n  created() {\n    this.arefApi = new ArefApi(this);\n  },\n  components: {\n    TheSidemenu,\n    TheTopmenu,\n  },\n  data() {\n    return {\n      error: null,\n      showSpin: false,\n      formData: {\n        id: this.$route.params.categorytwoId\n          ? this.$route.params.categorytwoId\n          : null,\n        name: null,\n        category_one: {\n          id: null,\n          name: null,\n        },\n        category_ones_id: null,\n      },\n      categoryOnes: null,\n    };\n  },\n  methods: {\n    addEditCategorytwo: function () {\n      if (!this.validateFrm()) {\n        return;\n      }\n      this.showSpin = true;\n      const fn = this.formData.id ? \"editCategorytwo\" : \"addCategorytwo\";\n      this.arefApi[fn](this.formData)\n        .then(() => {\n          this.$swal\n            .fire({\n              title: \"\",\n              text: `ثبت با موفقیت انجام شد`,\n              icon: \"success\",\n              confirmButtonText: \"متوجه شدم\",\n            }).then(() => {\n              if(!this.formData.id){\n                this.$router.push({name:'ListCategorytwos'})\n              }\n            });  \n        })\n        .catch((err) => {\n          let alertText = \"\";\n          if (err.data.errors) {\n            for (let i in err.data.errors) {\n              alertText += (alertText ? \"\" : \",\") + `${err.data.errors[i]} `;\n            }\n          }\n          this.$swal.fire({\n            title: \"!خطا\",\n            text: `${alertText}`,\n            icon: \"error\",\n            confirmButtonText: \"متوجه شدم\",\n          });\n        }).finally(()=>{\n          this.showSpin = false;\n        });\n    },\n    validateFrm: function () {\n      this.error = null;\n      if (!this.formData.name) {\n        this.error = \"نام باید بیشتر از دو حرف باشد\";\n        return false;\n      }\n\n      if (!this.formData.category_ones_id) {\n        this.error = \"دسته والد را وارد کنید\";\n        return false;\n      }\n      return true;\n    },\n    loadCategorytwoInfo: function () {\n      return new Promise((resolve, reject) => {\n        if (this.formData.id) {\n          this.arefApi\n            .getCategorytwo(this.formData.id)\n            .then((resp) => {\n              this.formData = resp.data;\n              this.formData.category_ones_id = resp.data.category_one.id;\n              resolve();\n            })\n            .catch((err) => {\n              this.$swal\n                .fire({\n                  title: \"خطا درنمایش اطلاعات !\",\n                  text: \"دسته پیدا نشد \",\n                  icon: \"error\",\n                })\n                .then(() => {\n                  this.$router.push({ name: \"EditCategorytwo\" });\n                });\n              reject(err);\n            });\n        }\n      });\n    },\n    getAllCategoryOnes: function () {\n      this.arefApi.getCategoryonesIndex(1, true).then((resp) => {\n        this.categoryOnes = resp.data;\n      });\n    },\n  },\n  mounted() {\n    this.getAllCategoryOnes();\n    this.loadCategorytwoInfo();\n  },\n};\n</script>\n\n","import { render } from \"./AddCategorytwo.vue?vue&type=template&id=d75a7378\"\nimport script from \"./AddCategorytwo.vue?vue&type=script&lang=js\"\nexport * from \"./AddCategorytwo.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}