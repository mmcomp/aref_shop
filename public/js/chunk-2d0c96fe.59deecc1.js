(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c96fe"],{"58af":function(e,t,i){"use strict";i.r(t);var r=i("7a23");const a={id:"page-content-wrapper"},s={class:"container-fluid text-start"},o=Object(r["i"])("p",{class:"fs-6 m-2"},"افزودن کاربر جدید",-1),l={key:0,class:"alert alert-danger"},c={class:"row"},n={class:"col-md-6 col-xs-12"},d={class:"form-floating mb-3"},m=Object(r["i"])("label",{for:"first_name"},"نام *",-1),f={class:"col-md-6 col-xs-12"},u={class:"form-floating mb-3"},b=Object(r["i"])("label",{for:"last_name"},"نام خانوادگی *",-1),p={class:"col-md-6 col-xs-12"},O={class:"form-floating mb-3"},h=Object(r["i"])("label",{for:"email"},"تلفن همراه (نام کاربری) *",-1),j={class:"col-md-6 col-xs-12"},_={class:"form-floating mb-3"},v=Object(r["i"])("label",{for:"address"},"نشانی",-1),g={class:"col-md-6 col-xs-12"},D={class:"form-floating mb-3"},w=Object(r["i"])("label",{for:"password"},"رمز عبور *",-1),y={class:"col-md-6 col-xs-12"},x={class:"form-floating mb-3"},U=Object(r["i"])("label",{for:"password_confirmation"},"تکرار رمز عبور *",-1),S={class:"col-md-6 col-xs-12"},A={class:"form-floating mb-3"},k=Object(r["i"])("label",{for:"postall"},"کدپستی",-1),V={class:"col-md-6 col-xs-12"},T={class:"form-floating mb-3"},C=Object(r["i"])("label",{for:"referrer_users_id"},"معرف",-1),$={class:"col-md-6 col-xs-12"},G={class:"form-floating mb-3"},J=Object(r["i"])("option",{value:""},null,-1),E=["value","selected"],N=Object(r["i"])("label",{for:"provinces"},"استان",-1),P={class:"col-md-6 col-xs-12"},B={class:"form-floating mb-3"},I=Object(r["i"])("option",{value:""},null,-1),F=["value","selected"],L=Object(r["i"])("label",{for:"cities_id"},"شهر",-1),M={class:"col-md-6 col-xs-12"},q={class:"form-floating mb-3"},z=Object(r["i"])("option",{value:""},null,-1),H=["value","selected"],K=Object(r["i"])("label",{for:"groups_id"},"گروه کاربری *",-1);function Q(e,t,i,Q,R,W){const X=Object(r["G"])("TheSidemenu"),Y=Object(r["G"])("TheTopmenu");return Object(r["y"])(),Object(r["h"])("div",{class:Object(r["s"])(["d-flex",this.$store.state.menuToggle]),id:"wrapper"},[Object(r["l"])(X),Object(r["i"])("div",a,[Object(r["l"])(Y),Object(r["i"])("div",s,[o,R.error?(Object(r["y"])(),Object(r["h"])("div",l,Object(r["J"])(R.error),1)):Object(r["g"])("",!0),Object(r["i"])("form",c,[Object(r["i"])("div",n,[Object(r["i"])("div",d,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"first_name",name:"first_name",placeholder:"آنوشا","onUpdate:modelValue":t[0]||(t[0]=e=>R.formData.first_name=e)},null,512),[[r["O"],R.formData.first_name]]),m])]),Object(r["i"])("div",f,[Object(r["i"])("div",u,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"last_name",name:"last_name",placeholder:"آنوشا","onUpdate:modelValue":t[1]||(t[1]=e=>R.formData.last_name=e)},null,512),[[r["O"],R.formData.last_name]]),b])]),Object(r["i"])("div",p,[Object(r["i"])("div",O,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"email",name:"email",placeholder:"09153068145","onUpdate:modelValue":t[2]||(t[2]=e=>R.formData.email=e)},null,512),[[r["O"],R.formData.email]]),h])]),Object(r["i"])("div",j,[Object(r["i"])("div",_,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"address",name:"address",placeholder:"نشانی","onUpdate:modelValue":t[3]||(t[3]=e=>R.formData.address=e)},null,512),[[r["O"],R.formData.address]]),v])]),Object(r["i"])("div",g,[Object(r["i"])("div",D,[Object(r["S"])(Object(r["i"])("input",{type:"password",class:"form-control",id:"password",name:"password",placeholder:"رمز عبور","onUpdate:modelValue":t[4]||(t[4]=e=>R.formData.password=e)},null,512),[[r["O"],R.formData.password]]),w])]),Object(r["i"])("div",y,[Object(r["i"])("div",x,[Object(r["S"])(Object(r["i"])("input",{type:"password",class:"form-control",id:"password_confirmation",name:"password_confirmation",placeholder:"تکرار رمز عبور","onUpdate:modelValue":t[5]||(t[5]=e=>R.formData.password_confirmation=e)},null,512),[[r["O"],R.formData.password_confirmation]]),U])]),Object(r["i"])("div",S,[Object(r["i"])("div",A,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"postall",name:"postall",placeholder:"کدپستی","onUpdate:modelValue":t[6]||(t[6]=e=>R.formData.postall=e)},null,512),[[r["O"],R.formData.postall]]),k])]),Object(r["i"])("div",V,[Object(r["i"])("div",T,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",id:"referrer_users_id",name:"referrer_users_id",placeholder:"معرف","onUpdate:modelValue":t[7]||(t[7]=e=>R.formData.referrer_users_id=e)},null,512),[[r["O"],R.formData.referrer_users_id]]),C])]),Object(r["i"])("div",$,[Object(r["i"])("div",G,[Object(r["i"])("select",{class:"form-control",id:"provinces",name:"provinces",onChange:t[8]||(t[8]=e=>W.changeCities(e))},[J,(Object(r["y"])(!0),Object(r["h"])(r["a"],null,Object(r["E"])(R.provinces,e=>(Object(r["y"])(),Object(r["h"])("option",{key:e.id,value:e.id,selected:e.id==R.formData.provinces_id},Object(r["J"])(e.name),9,E))),128))],32),N])]),Object(r["i"])("div",P,[Object(r["i"])("div",B,[Object(r["S"])(Object(r["i"])("select",{class:"form-control",id:"cities_id",name:"cities_id","onUpdate:modelValue":t[9]||(t[9]=e=>R.formData.cities_id=e)},[I,(Object(r["y"])(!0),Object(r["h"])(r["a"],null,Object(r["E"])(R.cities,e=>(Object(r["y"])(),Object(r["h"])("option",{key:e.id,value:e.id,selected:e.id==R.formData.cities_id},Object(r["J"])(e.name),9,F))),128))],512),[[r["N"],R.formData.cities_id]]),L])]),Object(r["i"])("div",M,[Object(r["i"])("div",q,[Object(r["S"])(Object(r["i"])("select",{class:"form-control",id:"groups_id",name:"groups_id","onUpdate:modelValue":t[10]||(t[10]=e=>R.formData.groups_id=e)},[z,(Object(r["y"])(!0),Object(r["h"])(r["a"],null,Object(r["E"])(R.groups,e=>(Object(r["y"])(),Object(r["h"])("option",{key:e.id,value:e.id,selected:e.id==this.formData.groups_id},Object(r["J"])(e.name),9,H))),128))],512),[[r["N"],R.formData.groups_id]]),K])])]),Object(r["i"])("div",null,[R.showSaveBtn?(Object(r["y"])(),Object(r["h"])("a",{key:0,class:"btn btn-primary btn-block",onClick:t[11]||(t[11]=e=>W.addEditUser())}," ثبت ")):Object(r["g"])("",!0)])])])],2)}var R=i("6bf9"),W=i("75d2"),X=i("09bb"),Y={name:"AddUser",components:{TheSidemenu:R["a"],TheTopmenu:W["a"]},data(){return{error:null,showSaveBtn:!0,formData:{id:this.$route.params.userId?this.$route.params.userId:null,first_name:null,last_name:null,email:null,referrer_users_id:null,address:null,postall:null,cities_id:null,groups_id:null,password:null,password_confirmation:null,provinces_id:null},cities:null,arefApi:new X["a"](this),provinces:null,groups:null}},methods:{addEditUser:function(){if(!this.validateFrm())return;const e=this.formData.id?"editUser":"addUser";this.formData.referrer_users_id=this.formData.referrer_users_id?Number(this.formData.referrer_users_id):this.formData.referrer_users_id,this.arefApi[e](this.formData).then(()=>{this.$swal.fire({title:"",text:"ثبت کاربر با موفقیت انجام شد",icon:"success",confirmButtonText:"متوجه شدم"}).then(()=>{this.$router.push({name:"ListUsers"})})}).catch(e=>{let t="";if(e.data.errors)for(let i in e.data.errors)t+=(t?"":",")+e.data.errors[i]+" ";this.$swal.fire({title:"!خطا",text:""+t,icon:"error",confirmButtonText:"متوجه شدم"})})},validMobile:function(e){return e=e.trim(),!(e.indexOf(" ")>-1)&&(11==e.length&&0==e.charAt(0)&&9==e.charAt(1))},validateFrm:function(){if(this.error=null,!this.formData.first_name||this.formData.first_name.length<3)return this.error="نام باید بیشتر از دو حرف باشد",!1;if(!this.formData.last_name||this.formData.last_name.length<3)return this.error="نام خانوادگی باید بیشتر از دو حرف باشد",!1;if(!this.formData.email)return this.error=" نام کاربری را صحیح وارد کنید",!1;if(!this.formData.id){if(!this.formData.password)return this.error="رمز عبور را وارد نمایید",!1;if(!this.formData.password_confirmation)return this.error="تکرار رمز عبور را وارد نمایید",!1}return this.formData.password!=this.formData.password_confirmation?(this.error="رمز عبور با تکرار آن برابر نمی باشد",!1):!(Number(this.formData.groups_id)<=0)||(this.error="گروه کاربری را انتخاب فرمایید",!1)},loadUserInfo:function(){return new Promise((e,t)=>{this.formData.id&&this.arefApi.getUser(this.formData.id).then(t=>{this.formData=t,this.formData.groups_id=t.group?t.group.id:null,this.formData.cities_id=t.city?t.city.id:null,this.formData.provinces_id=t.city?t.city.provinces_id:null,this.formData.referrer_users_id=t.referrer_user?Number(t.referrer_user.id):null,e()}).catch(e=>{this.$swal.fire({title:"خطا در نمایش اطلاعات کاربر!",text:"کاربر پیدا نشد ",icon:"error"}).then(()=>{this.$router.push({name:"ListUsers"})}),t(e)})})},getCities:async function(){this.cities=await this.arefApi.getCities()},getProvinces:async function(){const e=await this.arefApi.getProvinces();this.provinces=e.data},changeCities:async function(e){const t=await this.arefApi.GetCitiesOfAProvince(e.target.value);this.cities=t.data},getGroups:async function(){const e=await this.arefApi.getGroups();this.groups=e.data}},mounted(){this.loadUserInfo().finally(()=>{this.getCities()}),this.getProvinces(),this.getGroups()}},Z=i("6b0d"),ee=i.n(Z);const te=ee()(Y,[["render",Q]]);t["default"]=te}}]);
//# sourceMappingURL=chunk-2d0c96fe.59deecc1.js.map