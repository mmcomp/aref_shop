{"version":3,"sources":["webpack:///./src/views/AddCategorytwo.vue","webpack:///./src/views/AddCategorytwo.vue?8182"],"names":["id","class","_createElementVNode","for","_hoisted_13","_createElementBlock","$store","state","menuToggle","_createVNode","_component_TheSidemenu","_component_TheTopmenu","_toDisplayString","$route","meta","title","$data","name","category_ones_id","$event","_Fragment","_renderList","item","key","value","selected","category_one","_hoisted_8","_hoisted_9","type","placeholder","_hoisted_12","onClick","$options","_hoisted_14","created","this","arefApi","ArefApi","components","TheSidemenu","TheTopmenu","data","error","showSpin","formData","params","categorytwoId","categoryOnes","methods","addEditCategorytwo","validateFrm","fn","then","$swal","fire","text","icon","confirmButtonText","$router","push","catch","err","alertText","errors","i","finally","loadCategorytwoInfo","Promise","resolve","reject","getCategorytwo","resp","getAllCategoryOnes","getCategoryonesIndex","mounted","__exports__","render"],"mappings":"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","file":"js/chunk-2d0ba137.825b5aa8.js","sourcesContent":["<template>\n  <div class=\"d-flex\" :class=\"this.$store.state.menuToggle\" id=\"wrapper\">\n    <TheSidemenu />\n    <div id=\"page-content-wrapper\">\n      <TheTopmenu />\n      <div class=\"container-fluid text-start\">\n        <p class=\"fs-6 m-2\">\n          {{ this.$route.meta.title }}\n        </p>\n        <div v-if=\"error\" class=\"alert alert-danger\">\n          {{ error }}\n        </div>\n        <form class=\"row\">\n          <div class=\"col-md-6 col-xs-12\">\n            <div class=\"form-floating mb-3\">\n              <select\n                class=\"form-control\"\n                id=\"category_ones_id\"\n                name=\"category_ones_id\"\n                v-model=\"formData.category_ones_id\"\n              >\n                <option\n                  v-for=\"item in categoryOnes\"\n                  :key=\"item.id\"\n                  :value=\"item.id\"\n                  :selected=\"item.id == formData.category_one.id\"\n                >\n                  {{ item.name }}\n                </option>\n              </select>\n              <label for=\"provinces\">دسته والد-سطح یک</label>\n            </div>\n          </div>\n\n          <div class=\"col-md-6 col-xs-12\">\n            <div class=\"form-floating mb-3\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"name\"\n                name=\"name\"\n                placeholder=\"نام دسته\"\n                v-model=\"formData.name\"\n              />\n              <label for=\"name\">نام *</label>\n            </div>\n          </div>\n        </form>\n        <div>\n          <a\n            class=\"btn btn-primary btn-block\"\n            @click=\"addEditCategorytwo()\"\n          >\n            ثبت\n          </a>\n          <span v-show=\"showSpin\" >\n            <i class=\"fas fa-spinner fa-spin mt-3\"></i>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TheSidemenu from \"../components/TheSidemenu\";\nimport TheTopmenu from \"../components/TheTopmenu\";\nimport ArefApi from \"../libs/api.js\";\n\nexport default {\n  name: \"AddCategorytwo\",\n  created() {\n    this.arefApi = new ArefApi(this);\n  },\n  components: {\n    TheSidemenu,\n    TheTopmenu,\n  },\n  data() {\n    return {\n      error: null,\n      showSpin: false,\n      formData: {\n        id: this.$route.params.categorytwoId\n          ? this.$route.params.categorytwoId\n          : null,\n        name: null,\n        category_one: {\n          id: null,\n          name: null,\n        },\n        category_ones_id: null,\n      },\n      categoryOnes: null,\n    };\n  },\n  methods: {\n    addEditCategorytwo: function () {\n      if (!this.validateFrm()) {\n        return;\n      }\n      this.showSpin = true;\n      const fn = this.formData.id ? \"editCategorytwo\" : \"addCategorytwo\";\n      this.arefApi[fn](this.formData)\n        .then(() => {\n          this.$swal\n            .fire({\n              title: \"\",\n              text: `ثبت با موفقیت انجام شد`,\n              icon: \"success\",\n              confirmButtonText: \"متوجه شدم\",\n            }).then(() => {\n              if(!this.formData.id){\n                this.$router.push({name:'ListCategorytwos'})\n              }\n            });  \n        })\n        .catch((err) => {\n          let alertText = \"\";\n          if (err.data.errors) {\n            for (let i in err.data.errors) {\n              alertText += (alertText ? \"\" : \",\") + `${err.data.errors[i]} `;\n            }\n          }\n          this.$swal.fire({\n            title: \"!خطا\",\n            text: `${alertText}`,\n            icon: \"error\",\n            confirmButtonText: \"متوجه شدم\",\n          });\n        }).finally(()=>{\n          this.showSpin = false;\n        });\n    },\n    validateFrm: function () {\n      this.error = null;\n      if (!this.formData.name) {\n        this.error = \"نام باید بیشتر از دو حرف باشد\";\n        return false;\n      }\n\n      if (!this.formData.category_ones_id) {\n        this.error = \"دسته والد را وارد کنید\";\n        return false;\n      }\n      return true;\n    },\n    loadCategorytwoInfo: function () {\n      return new Promise((resolve, reject) => {\n        if (this.formData.id) {\n          this.arefApi\n            .getCategorytwo(this.formData.id)\n            .then((resp) => {\n              this.formData = resp.data;\n              this.formData.category_ones_id = resp.data.category_one.id;\n              resolve();\n            })\n            .catch((err) => {\n              this.$swal\n                .fire({\n                  title: \"خطا درنمایش اطلاعات !\",\n                  text: \"دسته پیدا نشد \",\n                  icon: \"error\",\n                })\n                .then(() => {\n                  this.$router.push({ name: \"EditCategorytwo\" });\n                });\n              reject(err);\n            });\n        }\n      });\n    },\n    getAllCategoryOnes: function () {\n      this.arefApi.getCategoryonesIndex(1, true).then((resp) => {\n        this.categoryOnes = resp.data;\n      });\n    },\n  },\n  mounted() {\n    this.getAllCategoryOnes();\n    this.loadCategorytwoInfo();\n  },\n};\n</script>\n\n","import { render } from \"./AddCategorytwo.vue?vue&type=template&id=d75a7378\"\nimport script from \"./AddCategorytwo.vue?vue&type=script&lang=js\"\nexport * from \"./AddCategorytwo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/hamed/software/setavin-site/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}