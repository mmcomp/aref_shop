(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78645402"],{"498a":function(e,t,r){"use strict";var a=r("23e7"),n=r("58a8").trim,i=r("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},"58af":function(e,t,r){"use strict";r.r(t);r("b0c0");var a=r("7a23"),n={id:"page-content-wrapper"},i={class:"container-fluid text-start"},o=Object(a["j"])("p",{class:"fs-6 m-2"},"افزودن کاربر جدید",-1),s={key:0,class:"alert alert-danger"},c={class:"row"},l={class:"col-md-6 col-xs-12"},u={class:"form-floating mb-3"},f=Object(a["j"])("label",{for:"first_name"},"نام *",-1),d={class:"col-md-6 col-xs-12"},m={class:"form-floating mb-3"},j=Object(a["j"])("label",{for:"last_name"},"نام خانوادگی *",-1),p={class:"col-md-6 col-xs-12"},b={class:"form-floating mb-3"},O=Object(a["j"])("label",{for:"email"},"تلفن همراه (نام کاربری) *",-1),h={class:"col-md-6 col-xs-12"},v={class:"form-floating mb-3"},_=Object(a["j"])("label",{for:"address"},"نشانی",-1),g={class:"col-md-6 col-xs-12"},D={class:"form-floating mb-3"},w=Object(a["j"])("label",{for:"password"},"رمز عبور *",-1),x={class:"col-md-6 col-xs-12"},y={class:"form-floating mb-3"},U=Object(a["j"])("label",{for:"password_confirmation"},"تکرار رمز عبور *",-1),k={class:"col-md-6 col-xs-12"},A={class:"form-floating mb-3"},I=Object(a["j"])("label",{for:"postall"},"کدپستی",-1),M={class:"col-md-6 col-xs-12"},C={class:"form-floating mb-3"},V=Object(a["j"])("label",{for:"referrer_users_id"},"معرف",-1),T={class:"col-md-6 col-xs-12"},R={class:"form-floating mb-3"},$=Object(a["j"])("option",{value:""},null,-1),E=Object(a["j"])("label",{for:"provinces"},"استان",-1),P={class:"col-md-6 col-xs-12"},S={class:"form-floating mb-3"},B=Object(a["j"])("option",{value:""},null,-1),G=Object(a["j"])("label",{for:"cities_id"},"شهر",-1),N={class:"col-md-6 col-xs-12"},F={class:"form-floating mb-3"},H=Object(a["j"])("option",{value:""},null,-1),J=Object(a["j"])("label",{for:"groups_id"},"گروه کاربری *",-1);function L(e,t,r,L,q,z){var K=this,Q=Object(a["C"])("TheSidemenu"),W=Object(a["C"])("TheTopmenu");return Object(a["u"])(),Object(a["f"])("div",{class:["d-flex",this.$store.state.menuToggle],id:"wrapper"},[Object(a["j"])(Q),Object(a["j"])("div",n,[Object(a["j"])(W),Object(a["j"])("div",i,[o,q.error?(Object(a["u"])(),Object(a["f"])("div",s,Object(a["E"])(q.error),1)):Object(a["g"])("",!0),Object(a["j"])("form",c,[Object(a["j"])("div",l,[Object(a["j"])("div",u,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"first_name",name:"first_name",placeholder:"آنوشا","onUpdate:modelValue":t[1]||(t[1]=function(e){return q.formData.first_name=e})},null,512),[[a["I"],q.formData.first_name]]),f])]),Object(a["j"])("div",d,[Object(a["j"])("div",m,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"last_name",name:"last_name",placeholder:"آنوشا","onUpdate:modelValue":t[2]||(t[2]=function(e){return q.formData.last_name=e})},null,512),[[a["I"],q.formData.last_name]]),j])]),Object(a["j"])("div",p,[Object(a["j"])("div",b,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"email",name:"email",placeholder:"09153068145","onUpdate:modelValue":t[3]||(t[3]=function(e){return q.formData.email=e})},null,512),[[a["I"],q.formData.email]]),O])]),Object(a["j"])("div",h,[Object(a["j"])("div",v,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"address",name:"address",placeholder:"نشانی","onUpdate:modelValue":t[4]||(t[4]=function(e){return q.formData.address=e})},null,512),[[a["I"],q.formData.address]]),_])]),Object(a["j"])("div",g,[Object(a["j"])("div",D,[Object(a["M"])(Object(a["j"])("input",{type:"password",class:"form-control",id:"password",name:"password",placeholder:"رمز عبور","onUpdate:modelValue":t[5]||(t[5]=function(e){return q.formData.password=e})},null,512),[[a["I"],q.formData.password]]),w])]),Object(a["j"])("div",x,[Object(a["j"])("div",y,[Object(a["M"])(Object(a["j"])("input",{type:"password",class:"form-control",id:"password_confirmation",name:"password_confirmation",placeholder:"تکرار رمز عبور","onUpdate:modelValue":t[6]||(t[6]=function(e){return q.formData.password_confirmation=e})},null,512),[[a["I"],q.formData.password_confirmation]]),U])]),Object(a["j"])("div",k,[Object(a["j"])("div",A,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"postall",name:"postall",placeholder:"کدپستی","onUpdate:modelValue":t[7]||(t[7]=function(e){return q.formData.postall=e})},null,512),[[a["I"],q.formData.postall]]),I])]),Object(a["j"])("div",M,[Object(a["j"])("div",C,[Object(a["M"])(Object(a["j"])("input",{type:"text",class:"form-control",id:"referrer_users_id",name:"referrer_users_id",placeholder:"معرف","onUpdate:modelValue":t[8]||(t[8]=function(e){return q.formData.referrer_users_id=e})},null,512),[[a["I"],q.formData.referrer_users_id]]),V])]),Object(a["j"])("div",T,[Object(a["j"])("div",R,[Object(a["j"])("select",{class:"form-control",id:"provinces",name:"provinces",onChange:t[9]||(t[9]=function(e){return z.changeCities(e)})},[$,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(q.provinces,(function(e){return Object(a["u"])(),Object(a["f"])("option",{key:e.id,value:e.id,selected:e.id==q.formData.provinces_id},Object(a["E"])(e.name),9,["value","selected"])})),128))],32),E])]),Object(a["j"])("div",P,[Object(a["j"])("div",S,[Object(a["M"])(Object(a["j"])("select",{class:"form-control",id:"cities_id",name:"cities_id","onUpdate:modelValue":t[10]||(t[10]=function(e){return q.formData.cities_id=e})},[B,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(q.cities,(function(e){return Object(a["u"])(),Object(a["f"])("option",{key:e.id,value:e.id,selected:e.id==q.formData.cities_id},Object(a["E"])(e.name),9,["value","selected"])})),128))],512),[[a["H"],q.formData.cities_id]]),G])]),Object(a["j"])("div",N,[Object(a["j"])("div",F,[Object(a["M"])(Object(a["j"])("select",{class:"form-control",id:"groups_id",name:"groups_id","onUpdate:modelValue":t[11]||(t[11]=function(e){return q.formData.groups_id=e})},[H,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(q.groups,(function(e){return Object(a["u"])(),Object(a["f"])("option",{key:e.id,value:e.id,selected:e.id==K.formData.groups_id},Object(a["E"])(e.name),9,["value","selected"])})),128))],512),[[a["H"],q.formData.groups_id]]),J])])]),Object(a["j"])("div",null,[q.showSaveBtn?(Object(a["u"])(),Object(a["f"])("a",{key:0,class:"btn btn-primary btn-block",onClick:t[12]||(t[12]=function(e){return z.addEditUser()})}," ثبت ")):Object(a["g"])("",!0)])])])],2)}var q=r("1da1"),z=(r("96cf"),r("a9e3"),r("498a"),r("d3b7"),r("6bf9")),K=r("75d2"),Q=r("09bb"),W={name:"AddUser",components:{TheSidemenu:z["a"],TheTopmenu:K["a"]},data:function(){return{error:null,showSaveBtn:!0,formData:{id:this.$route.params.userId?this.$route.params.userId:null,first_name:null,last_name:null,email:null,referrer_users_id:null,address:null,postall:null,cities_id:null,groups_id:null,password:null,password_confirmation:null,provinces_id:null},cities:null,arefApi:new Q["a"](this),provinces:null,groups:null}},methods:{addEditUser:function(){var e=this;if(this.validateFrm()){var t=this.formData.id?"editUser":"addUser";this.formData.referrer_users_id=this.formData.referrer_users_id?Number(this.formData.referrer_users_id):this.formData.referrer_users_id,this.arefApi[t](this.formData).then((function(){e.$swal.fire({title:"",text:"ثبت کاربر با موفقیت انجام شد",icon:"success",confirmButtonText:"متوجه شدم"}).then((function(){e.$router.push({name:"ListUsers"})}))})).catch((function(t){var r="";if(t.data.errors)for(var a in t.data.errors)r+=(r?"":",")+"".concat(t.data.errors[a]," ");e.$swal.fire({title:"!خطا",text:"".concat(r),icon:"error",confirmButtonText:"متوجه شدم"})}))}},validMobile:function(e){return e=e.trim(),!(e.indexOf(" ")>-1)&&(11==e.length&&0==e.charAt(0)&&9==e.charAt(1))},validateFrm:function(){if(this.error=null,!this.formData.first_name||this.formData.first_name.length<3)return this.error="نام باید بیشتر از دو حرف باشد",!1;if(!this.formData.last_name||this.formData.last_name.length<3)return this.error="نام خانوادگی باید بیشتر از دو حرف باشد",!1;if(!this.formData.email||!this.validMobile(this.formData.email))return this.error="تلفن همراه باید ۱۱ عدد باشد مانند 09150001111",!1;if(!this.formData.id){if(!this.formData.password)return this.error="رمز عبور را وارد نمایید",!1;if(!this.formData.password_confirmation)return this.error="تکرار رمز عبور را وارد نمایید",!1}return this.formData.password!=this.formData.password_confirmation?(this.error="رمز عبور با تکرار آن برابر نمی باشد",!1):!(Number(this.formData.groups_id)<=0)||(this.error="گروه کاربری را انتخاب فرمایید",!1)},loadUserInfo:function(){var e=this;return new Promise((function(t,r){e.formData.id&&e.arefApi.getUser(e.formData.id).then((function(r){e.formData=r,e.formData.groups_id=r.group?r.group.id:null,e.formData.cities_id=r.city?r.city.id:null,e.formData.provinces_id=r.city?r.city.provinces_id:null,e.formData.referrer_users_id=r.referrer_user?Number(r.referrer_user.id):null,t()})).catch((function(t){e.$swal.fire({title:"خطا در نمایش اطلاعات کاربر!",text:"کاربر پیدا نشد ",icon:"error"}).then((function(){e.$router.push({name:"ListUsers"})})),r(t)}))}))},getCities:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.arefApi.getCities();case 2:this.cities=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getProvinces:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.arefApi.getProvinces();case 2:t=e.sent,this.provinces=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeCities:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.arefApi.GetCitiesOfAProvince(t.target.value);case 2:r=e.sent,this.cities=r.data;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getGroups:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.arefApi.getGroups();case 2:t=e.sent,this.groups=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.loadUserInfo().finally((function(){e.getCities()})),this.getProvinces(),this.getGroups()}};W.render=L;t["default"]=W},c8d2:function(e,t,r){var a=r("d039"),n=r("5899"),i="​᠎";e.exports=function(e){return a((function(){return!!n[e]()||i[e]()!=i||n[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-78645402.3f209af1.js.map